{% extends 'base.html.twig' %}

{% block title %}Immeuble
{% endblock %}

{% block body %}

	<form>
		<div class="form-group row">
			<label for="readOnlyInput" class="col-sm-2 col-form-label fw-bold">Référence Proprietaire :
			</label>
			<div class="col-sm-10">
				<input type="text" readonly class="form-control-plaintext fw-bold" id="staticEmail" value="{{ immeuble.ReferenceProprio }}">
			</div>
		</div>
	</form>
	<h1 style="background:linear-gradient(50deg, rgb(255, 254, 254) 24%, rgb(9, 211, 170) 100%);float: right; border: 1px solid #dee2e6;margin-top: -2px; border-radius: 5px;">
		{{ immeuble.Adresse }}
	</h1>

	<ul class="nav nav-tabs" role="tablist">
		<li class="nav-item" role="presentation">
			<a class="nav-link active" data-bs-toggle="tab" href="#home" aria-selected="true" role="tab" tabindex="-1">Général</a>
		</li>
		<li class="nav-item" role="presentation">
			<a class="nav-link " data-bs-toggle="tab" href="#piece_jointe" aria-selected="true" role="tab">Pièce jointe</a>
		</li>
	</ul>
	<div id="myTabContent" class="tab-content">
		<div class="tab-pane fade active show" id="home" role="tabpanel">
			<br>
			<form>
				<div class="form-group row">
					<label for="readOnlyInput" class="col-sm-2 col-form-label fw-bold">ID Immeuble :
					</label>
					<div class="col-sm-10">
						<input type="text" readonly class="form-control-plaintext fw-bold" id="staticEmail" value="{{ immeuble.IDImmeuble }}">
					</div>
				</div>
			</form>
			<br>
			<div class="accordion" id="accordionExample">
				<div class="accordion-item">
					<h2 class="accordion-header" id="headingOne">
						<button class="accordion-button fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
							Situation
						</button>
					</h2>
					<div id="collapseOne" style="padding:2%" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
						<div class="accordion-body">
							<div class="form-group row">
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">N° Planche Cadastrale</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.NumPlancheCadastrale }}" readonly="">
								</div>

								<div class="col-md-4 mb-3">
									<label class="form-check-label" for="flexCheckDefault">
										SMS
									</label>
									{% if immeuble.SMS == 0 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.SMS }}" id="flexCheckDefault">
									{% elseif immeuble.SMS == 1 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.SMS }}" checked id="flexCheckDefault">
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="accordion-item">
					<h2 class="accordion-header" id="headingTwo">
						<button class="accordion-button fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
							Complément
						</button>
					</h2>
					<div id="collapseTwo" style="padding:2%" class="accordion-collapse collapse show" aria-labelledby="headingTwo" data-bs-parent="#accordionExample" style="">
						<form>
							<div class="form-group row">
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Etat Dossier</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.EtatDossier }}" readonly="">
								</div>

								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Enquete</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.Enquete }}" readonly="">

								</div>
								<div class="col-md-4 mb-3">
									<label for="flexCheckDefault">Visité</label>
									{% if immeuble.Visite == 0 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.Visite }}" id="flexCheckDefault">
									{% elseif immeuble.Visite == 1 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.Visite }}" checked id="flexCheckDefault">
									{% endif %}
								</div>
							</div>

							<div class="form-group row">
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Gardien</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.NomGardien }}" readonly="">
								</div>

								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Description</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.Description }}" readonly="">
								</div>
							</div>

							<div class="form-group row">
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Suivi Par</label>
									<input class="form-control " id="readOnlyInput" type="text" placeholder="{{ immeuble.SuiviPar }}" readonly="">
								</div>

								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Vendu</label>
									{% if immeuble.Vendu == 0 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.Vendu }}" id="flexCheckDefault">
									{% elseif immeuble.Vendu == 1 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.Vendu }}" checked id="flexCheckDefault">
									{% endif %}
								</div>

								<div class="col-md-4 mb-3">
									<label for="flexCheckDefault">NCPCF</label>
									{% if immeuble.NCPCF == 0 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.NCPCF }}" id="flexCheckDefault">
									{% elseif immeuble.NCPCF == 1 %}
										<input class="form-check-input" type="checkbox" disabled="" value="{{ immeuble.NCPCF }}" checked id="flexCheckDefault">
									{% endif %}
								</div>
							</div>

							<div class="form-group row">
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Origine Contact</label>
									<input class="form-control" id="readOnlyInput" type="text" placeholder="{{ immeuble.OrigineContact }}" readonly="">
								</div>
								<div class="col-md-4 mb-3">
									<label for="readOnlyInput">Intermediaire</label>
									<input class="form-control " id="readOnlyInput" type="text" placeholder="{{ immeuble.Intermediaire }}" readonly="">
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="accordion-item">
					<h2 class="accordion-header" id="headingThree">
						<button class="accordion-button fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
							Commentaire
						</button>
					</h2>
					<div id="collapseThree" style="padding:2%" class="accordion-collapse collapse show" aria-labelledby="headingThree" data-bs-parent="#accordionExample" style="">
						<div class="form-group row">
							<div class="col-md-12 mb-3">
								<textarea class="form-control" id="exampleTextarea" rows="3" readonly="">{{ immeuble.Commentaire }}</textarea>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
		<div class="tab-pane" id="piece_jointe" role="tabpanel">
			<div class="row">
				<div class="col-6">
					<h3 class="text-light bg-info mt-4 text-center">Image</h3>
					{% if immeuble.Photo1 != "" %}
						<div class="col d-flex justify-content-center">
							<img src="{{ asset('/uploads/img/immeuble/' ~ immeuble.Photo1) }}" alt="Image de l'immeuble" class="w-75 mt-4">
						</div>
					{% endif %}
				</div>
				<div class="col-6 float-right">
					<h3 class="text-light bg-info mt-4 text-center">PDF</h3>
					{% if immeuble.Photo2 != "" %}
						<div class="col d-flex justify-content-center">
							<a href="{{ asset('/uploads/pdf/immeuble/' ~ immeuble.Photo2) }}" alt="PDF de l'immeuble" class="m-auto mt-4">{{ immeuble.Photo2 }}</a>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
		<br>

		<ul class="nav nav-tabs" role="tablist">
			<li class="nav-item" role="presentation">
				<a class="nav-link active" data-bs-toggle="tab" href="#adresses" aria-selected="true" role="tab" tabindex="-1">Adresses</a>
			</li>
			<li class="nav-item" role="presentation">
				<a class="nav-link " data-bs-toggle="tab" href="#contact" aria-selected="true" role="tab">Contact</a>
			</li>
			<li class="nav-item" role="presentation">
				<a class="nav-link " data-bs-toggle="tab" href="#activites" aria-selected="true" role="tab">Activites</a>
			</li>
			<li class="nav-item" role="presentation">
				<a class="nav-link " data-bs-toggle="tab" href="#opportunites" aria-selected="true" role="tab">Opportunites</a>
			</li>
		</ul>

		<div id="myTabContent" class="tab-content">
			<div class="tab-pane fade active show" id="adresses" role="tabpanel">
				<table id="tableImmeuble" data-pagination="true" data-toolbar="#toolbarImmeuble" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" data-show-print="true" class="table table-list table-bordered table-striped m-auto">
					<thead>
						<tr>
							<th data-field="id" data-sortable="true" scope="col">ID</th>
							<th data-field="numPrincipal" data-sortable="true" scope="col">N°</th>
							<th data-field="typeVoie" data-sortable="true" scope="col">Type de Voie</th>
							<th data-field="adresse" data-sortable="true" scope="col">Adresse</th>
							<th data-field="cp" data-sortable="true" scope="col">CP</th>
							<th data-field="ville" data-sortable="true" scope="col">Ville</th>
							<th data-field="adressePrincipale" data-sortable="true" scope="col">Adresse Principale</th>
							<th data-field="action">actions</th>
						</tr>
					</thead>
					<tbody class="table-group-divider">
						{% for adresse in adresses %}

							<tr>
								<td>{{ adresse.IDAdresse }}</td>
								<td>{{ adresse.NumPrincipal }}</td>
								<td>{{ adresse.TypeVoie }}</td>
								<td>{{ adresse.Adresse }}</td>
								<td>{{ adresse.CP }}</td>
								<td>{{ adresse.Ville }}</td>
								{% if adresse.AdressePrincipale == 1 %}
									<td class="text-success">
										<i class="fa-solid fa-check"></i>
									</td>
								{% elseif adresse.AdressePrincipale == 0 %}
									<td class="text-danger">
										<i class="fa-solid fa-xmark"></i>
									</td>
								{% endif %}
								<td>
									<a class="text-decoration-underline-remove" href="{{ path('adresse_show', {'IDAdresse': adresse.IDAdresse}) }}">
										<i class="bi bi-eye" style="margin-right:15px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('adresse_edit', {'IDAdresse': adresse.IDAdresse}) }}">
										<i class="bi bi-pen" style="margin-right:10px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('adresse_delete', {'IDAdresse': adresse.IDAdresse}) }}">
										<i class="bi bi-trash3"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div class="tab-pane fade" id="contact" role="tabpanel">
				<table id="tableImmeuble" data-pagination="true" data-toolbar="#toolbarImmeuble" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" data-show-print="true" class="table table-list table-bordered table-striped m-auto">
					<thead>
						<tr>
							<th data-field="nom" data-sortable="true" scope="col">Nom</th>
							<th data-field="societe" data-sortable="true" scope="col">Société</th>
							<th data-field="adresse" data-sortable="true" scope="col">Adresse</th>
							<th data-field="cp" data-sortable="true" scope="col"></th>
							<th data-field="ville" data-sortable="true" scope="col"></th>
							<th data-field="tel" data-sortable="true" scope="col">Téléphone</th>
							<th data-field="qualite" data-sortable="true" scope="col">Qualité</th>
							<th data-field="action">actions</th>
						</tr>
					</thead>
					<tbody class="table-group-divider">
						{% for contact in contacts %}
							<tr>
								<td>{{ contact.IDContact.Nom }}</td>
								<td>{{ contact.IDContact.Societe }}</td>
								<td>{{ contact.IDContact.Adresse }}</td>
								<td>{{ contact.IDContact.CP }}</td>
								<td>{{ contact.IDContact.Ville }}</td>
								<td>{{ contact.IDContact.Telephone }}</td>
								<td>{{ contact.IDContact.Civilite }}</td>
								<td>
									<a class="text-decoration-underline-remove" href="{{ path('contact_show', {'IDContact': contact.IDContact.IDContact}) }}">
										<i class="bi bi-eye" style="margin-right:15px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('contact_edit', {'IDContact': contact.IDContact.IDContact}) }}">
										<i class="bi bi-pen" style="margin-right:10px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('contact_delete', {'IDContact': contact.IDContact.IDContact}) }}">
										<i class="bi bi-trash3"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div class="tab-pane fade" id="activites" role="tabpanel">
				<table id="tableImmeuble" data-pagination="true" data-toolbar="#toolbarImmeuble" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" data-show-print="true" class="table table-list table-bordered table-striped m-auto">
					<thead>
						<tr>
							<th data-field="date" data-sortable="true" scope="col">Date</th>
							<th data-field="theme" data-sortable="true" scope="col">Thème</th>
							<th data-field="action" data-sortable="true" scope="col">Action</th>
							<th data-field="commentaire" data-sortable="true" scope="col">Commentaire</th>
							<th data-field="actions"></th>
						</tr>
					</thead>
					<tbody class="table-group-divider">
						{% for activite in activites %}
							<tr>
								<td>{{ activite.DateActivite|date('d-m-Y') }}</td>
								<td>{{ activite.Theme }}</td>
								<td>{{ activite.Action }}</td>
								<td>{{ activite.Commentaire }}</td>
								<td>
									<a class="text-decoration-underline-remove" href="{{ path('activite_show', {'IDActivite': activite.IDActivite}) }}">
										<i class="bi bi-eye" style="margin-right:15px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('activite_edit', {'IDActivite': activite.IDActivite}) }}">
										<i class="bi bi-pen" style="margin-right:10px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('activite_delete', {'IDActivite': activite.IDActivite}) }}">
										<i class="bi bi-trash3"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div class="tab-pane fade" id="opportunites" role="tabpanel">
				<table id="tableImmeuble" data-pagination="true" data-toolbar="#toolbarImmeuble" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" data-show-print="true" class="table table-list table-bordered table-striped m-auto">
					<thead>
						<tr>
							<th data-field="date" data-sortable="true" scope="col">Date</th>
							<th data-field="societe" data-sortable="true" scope="col">Société</th>
							<th data-field="cp" data-sortable="true" scope="col">Commentaire</th>
							<th data-field="action">actions</th>
						</tr>
					</thead>
					<tbody class="table-group-divider">
						{% for opportunite in opportunites %}
							<tr>
								<td>{{ opportunite.Date|date('d-m-Y') }}</td>
								<td>{{ opportunite.SocieteConcernee }}</td>
								<td>{{ opportunite.Commentaire }}</td>
								<td>
									<a class="text-decoration-underline-remove" href="{{ path('opportunite_show', {'IDOpportunite': opportunite.IDOpportunite}) }}">
										<i class="bi bi-eye" style="margin-right:15px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('opportunite_edit', {'IDOpportunite': opportunite.IDOpportunite}) }}">
										<i class="bi bi-pen" style="margin-right:10px"></i>
									</a>

									<a class="text-decoration-underline-remove" href="{{ path('opportunite_delete', {'IDOpportunite': opportunite.IDOpportunite}) }}">
										<i class="bi bi-trash3"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<br>
		<div class="float-end ">
			<button class="btn btn-light " type="button">
				<a class=" text-decoration-underline-remove" href="{{ path('immeubles') }}">Retourner à la liste</a>
			</button>
			<button class="btn btn-light " type="button">
				<a class=" text-decoration-underline-remove" href="{{ path('immeuble_edit', {'IDImmeuble': immeuble.IDImmeuble}) }}">edit</a>
			</button>
		</div>
		<br>
	{% endblock %}
