{% extends 'base.html.twig' %}

{% block title %}
	Projet Immo | Immeubles
{% endblock %}

{% block body %}
	<section class="section-immeuble">
		<h1 class="text-center">Immeubles</h1>
		<div
			class="row">
			<!-- Immeuble -->
			<div id="toolbarImmeuble" class="me-4 mb-3">
				<button id="advancedSearchImmeuble" class="btn btn-light">
					<a href="{{ path('immeuble_search') }}" class="text-decoration-none">
						<i class="fa-brands fa-searchengin"></i>
						Recherche Avancée</a>
				</button>
				<select class="form-control mt-3">
					<option value="">Export Basique</option>
					<option value="all">Exporter Tout</option>
					<option value="selected">Exporter Séléctionnés</option>
				</select>
				<br>
				<button class="btn btn-light btn-lg " type="button">
					<a href="{{ path('immeuble_new') }}">
						<i class="bi bi-file-earmark-plus"></i>
					</a>
				</button>
			</div>

			<table id="tableImmeuble" data-pagination="true" data-toolbar="#toolbarImmeuble" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" class="table table-list table-bordered table-striped m-auto">
				<thead>
					<tr>
						<th data-field="id" data-sortable="true" scope="col">N°</th>
						<th data-field="adresse" data-sortable="true" scope="col">Adresse</th>
						<th data-field="cp" data-sortable="true" scope="col">CP</th>
						<th data-field="ville" data-sortable="true" scope="col">Ville</th>
						<th data-field="refProprio" data-sortable="true" scope="col">Référence Propriétaire</th>
						<th data-field="date" data-sortable="true" scope="col">Date de l'Enquête</th>
						<th data-field="intermediaire" data-sortable="true" scope="col">Intermédiaire</th>
						<th data-field="suiviPar" data-sortable="true" scope="col">Responsable du Dossier</th>
						<th data-field="description" data-sortable="true" scope="col">Description</th>
						<th data-field="action">actions</th>
					</tr>
				</thead>
				<tbody class="table-group-divider">
					{% for immeuble in immeubles %}
						<tr>
							<td></td>
							<td>{{ immeuble.IDImmeuble }}</td>
							<td>{{ immeuble.Adresse }}</td>
							<td>{{ immeuble.CP }}</td>
							<td>{{ immeuble.Ville }}</td>
							{% for contact in contacts %}
								{% if contact.IDContact == immeuble.ReferenceProprio %}
									<td>{{ contact.Nom }}</td>
								{% endif %}
							{% endfor %}
							<td>{{ immeuble.DateEnquete|date("d/m/Y") }}</td>
							{% if immeuble.Intermediaire == "" %}
								<td>❌</td>
							{% elseif immeuble.Intermediaire == "null" %}
								<td>❌</td>
							{% else %}
								<td>{{ immeuble.Intermediaire }}</td>
							{% endif %}
							<td>{{ immeuble.SuiviPar }}</td>
							<td>{{ immeuble.Description }}</td>
							<td>
								<a href="{{ path('immeuble_show', {'IDImmeuble': immeuble.IDImmeuble}) }}">
									<i class="bi bi-eye" style="margin-right:15px"></i>
								</a>

								<a href="{{ path('immeuble_edit', {'IDImmeuble': immeuble.IDImmeuble}) }}">
									<i class="bi bi-pen" style="margin-right:10px"></i>
								</a>

								<a href="{{ path('immeuble_delete', {'IDImmeuble': immeuble.IDImmeuble}) }}">
									<i class="bi bi-trash3"></i>
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</section>
{% endblock body %}
