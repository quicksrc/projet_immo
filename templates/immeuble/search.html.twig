{% extends 'base.html.twig' %}

{% block title %}Gestion des Immeubles | Recherche Immeuble
{% endblock %}

{% block body %}
	{# {{ dump(queryRefProprio) }} #}
	<div class="row">
		{% include 'shared/_formsearchImmeuble.html.twig' with {form: form} %}
	</div>
	<div
		class="row mt-5">
		{# <div id="toolbarImmeubleSearch" class="me-4 mb-3">
																															<select class="form-control mt-3">
																																<option value="">Export Basique</option>
																																<option value="all">Exporter Tout</option>
																																<option value="selected">Exporter Séléctionnés</option>
																															</select>
																															<br>
																															<button class="btn btn-light btn-lg " type="button">
																																<a href="{{ path('immeuble_new') }}">
																																	<i class="bi bi-file-earmark-plus"></i>
																																</a>
																															</button>
																														</div> #}
		<table id="tableImmeubleSearch" data-pagination="true" data-toolbar="#toolbarImmeubleSearch" data-page-size="25" data-search="true" data-show-export="true" data-toggle="table" data-click-to-select="true" data-search-align="left" data-show-columns="true" data-show-print="true" class="table table-list table-bordered table-striped m-auto">
			<thead>
				<tr>
					<th data-field="id" data-sortable="true" scope="col">ID Immeuble</th>
					<th data-field="adresse" data-sortable="true" scope="col">Adresse</th>
					<th data-field="cp" data-sortable="true" scope="col">CP</th>
					<th data-field="ville" data-sortable="true" scope="col">Ville</th>
					<th data-field="refProprio" data-sortable="true" scope="col">Réf. Propriétaire</th>
					<th data-field="date" data-sortable="true" scope="col">Date de l'Enquête</th>
					<th data-field="intermediaire" data-sortable="true" scope="col">Intermédiaire</th>
					<th data-field="suiviPar" data-sortable="true" scope="col">Resp. du Dossier</th>
					<th data-field="description" data-sortable="true" scope="col">Description</th>
					<th data-field="action">actions</th>
				</tr>
			</thead>
			<tbody class="table-group-divider">
				{% for immeuble in immeubles %}
					<tr>
						<td>{{ immeuble.IDImmeuble }}</td>
						<td>{{ immeuble.Adresse }}</td>
						<td>{{ immeuble.CP }}</td>
						<td>{{ immeuble.Ville }}</td>
						<td>{{ immeuble.ReferenceProprio }}</td>
						<td>{{ immeuble.DateEnquete|date("d/m/Y") }}</td>
						{% if immeuble.Intermediaire == "" %}
							<td>✖️</td>
						{% elseif immeuble.Intermediaire == "null" %}
							<td>✖️</td>
						{% else %}
							<td>{{ immeuble.Intermediaire }}</td>
						{% endif %}
						<td>{{ immeuble.SuiviPar }}</td>
						<td>{{ immeuble.Description }}</td>
						<td>
							<a class="text-decoration-underline-remove" href="{{ path('immeuble_show', {'IDImmeuble': immeuble.IDImmeuble}) }}">
								<i class="bi bi-eye" style="margin-right:15px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_edit', {'IDImmeuble': immeuble.IDImmeuble}) }}">
								<i class="bi bi-pen" style="margin-right:10px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_delete', {'IDImmeuble': immeuble.IDImmeuble}) }}">
								<i class="bi bi-trash3"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
				{% for contact in contacts %}
					<tr>
						<td>{{ contact.IDImmeuble.IDImmeuble }}</td>
						<td>{{ contact.IDImmeuble.Adresse }}</td>
						<td>{{ contact.IDImmeuble.CP }}</td>
						<td>{{ contact.IDImmeuble.Ville }}</td>
						<td>{{ contact.IDImmeuble.ReferenceProprio }}</td>
						<td>{{ contact.IDImmeuble.DateEnquete|date("d/m/Y") }}</td>
						{% if contact.IDImmeuble.Intermediaire == "" %}
							<td>❌</td>
						{% elseif contact.IDImmeuble.Intermediaire == "null" %}
							<td>❌</td>
						{% else %}
							<td>{{ contact.IDImmeuble.Intermediaire }}</td>
						{% endif %}
						<td>{{ contact.IDImmeuble.SuiviPar }}</td>
						<td>{{ contact.IDImmeuble.Description }}</td>
						<td>
							<a class="text-decoration-underline-remove" href="{{ path('immeuble_show', {'IDImmeuble': contact.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-eye" style="margin-right:15px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_edit', {'IDImmeuble': contact.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-pen" style="margin-right:10px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_delete', {'IDImmeuble': contact.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-trash3"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
				{% for adresse in adresses %}
					<tr>
						<td>{{ adresse.IDImmeuble.IDImmeuble }}</td>
						<td>{{ adresse.IDImmeuble.Adresse }}</td>
						<td>{{ adresse.IDImmeuble.CP }}</td>
						<td>{{ adresse.IDImmeuble.Ville }}</td>
						<td>{{ adresse.IDImmeuble.ReferenceProprio }}</td>
						<td>{{ adresse.IDImmeuble.DateEnquete|date("d/m/Y") }}</td>
						{% if adresse.IDImmeuble.Intermediaire == "" %}
							<td>❌</td>
						{% elseif adresse.IDImmeuble.Intermediaire == "null" %}
							<td>❌</td>
						{% else %}
							<td>{{ adresse.IDImmeuble.Intermediaire }}</td>
						{% endif %}
						<td>{{ adresse.IDImmeuble.SuiviPar }}</td>
						<td>{{ adresse.IDImmeuble.Description }}</td>
						<td>
							<a class="text-decoration-underline-remove" href="{{ path('immeuble_show', {'IDImmeuble': adresse.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-eye" style="margin-right:15px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_edit', {'IDImmeuble': adresse.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-pen" style="margin-right:10px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_delete', {'IDImmeuble': adresse.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-trash3"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
				{% for activite in activites %}
					<tr>
						<td>{{ activite.IDImmeuble.IDImmeuble }}</td>
						<td>{{ activite.IDImmeuble.Adresse }}</td>
						<td>{{ activite.IDImmeuble.CP }}</td>
						<td>{{ activite.IDImmeuble.Ville }}</td>
						<td>{{ activite.IDImmeuble.ReferenceProprio }}</td>
						<td>{{ activite.IDImmeuble.DateEnquete|date("d/m/Y") }}</td>
						{% if activite.IDImmeuble.Intermediaire == "" %}
							<td>❌</td>
						{% elseif activite.IDImmeuble.Intermediaire == "null" %}
							<td>❌</td>
						{% else %}
							<td>{{ activite.IDImmeuble.Intermediaire }}</td>
						{% endif %}
						<td>{{ activite.IDImmeuble.SuiviPar }}</td>
						<td>{{ activite.IDImmeuble.Description }}</td>
						<td>
							<a class="text-decoration-underline-remove" href="{{ path('immeuble_show', {'IDImmeuble': activite.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-eye" style="margin-right:15px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_edit', {'IDImmeuble': activite.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-pen" style="margin-right:10px"></i>
							</a>

							<a class="text-decoration-underline-remove" href="{{ path('immeuble_delete', {'IDImmeuble': activite.IDImmeuble.IDImmeuble}) }}">
								<i class="bi bi-trash3"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
